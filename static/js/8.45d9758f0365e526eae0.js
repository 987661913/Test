webpackJsonp([8],{"337Y":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("cnFZ"),s={data:function(){return{title:"",tabOneHide:!1,content:"",inscription:"",dialogFormVisible:!1,textTitlt:"公告预览",dataNow:"",listNotice:"",noticeId:"",tabValues:1,isUpdate:!1}},created:function(){this.tabValues=1},mounted:function(){var t=this;this.bus.$on("openDia",function(i){t.tabValues=i,t.bus.$emit("backOpen",i)}),this.getNoticeList()},methods:{clearAll:function(){this.title="",this.content="",this.inscription=""},preview:function(){this.title?this.content?this.inscription?(this.dialogFormVisible=!0,this.getFullYear()):this.$notify({title:"提示",message:"落款还未填写，可能会影响您的预览体验！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"内容还未填写，可能会影响您的预览体验！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"标题还未填写，可能会影响您的预览体验！",type:"warning",duration:2e3})},getFullYear:function(){var t=new Date,i=t.getFullYear(),e=t.getMonth()+1,n=t.getDate();e<10&&(e="0"+e),n<10&&(n="0"+n),this.dataNow=i+"年"+e+"月"+n+"日"},subMission:function(){var t=this;this.title?this.content?this.inscription?Object(n.a)(this.title,this.content,this.inscription).then(function(){t.clearAll(),t.getNoticeList(),t.$notify({title:"成功",message:"新增成功！",type:"success",duration:2e3}),t.bus.$emit("backOpen",2),t.tabValues=2}):this.$notify({title:"提示",message:"落款还未填写！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"内容还未填写！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"标题还未填写！",type:"warning",duration:2e3})},getNoticeList:function(){var t=this;Object(n.c)(1,10).then(function(i){t.listNotice=i.data.rows}).catch(function(t){})},queryList:function(t){var i=this;Object(n.d)(t).then(function(e){i.noticeId=t,i.title=e.data.title,i.content=e.data.content,i.inscription=e.data.publishDept}),this.$router.push({path:"/notice/publish",query:{id:t}})},replyMission:function(){var t=this;this.title?this.content?this.inscription?Object(n.e)(this.noticeId,this.title,this.content,this.inscription).then(function(){t.clearAll(),t.getNoticeList(),t.$notify({title:"成功",message:"更新成功！",type:"success",duration:2e3}),t.isUpdate=!1,t.bus.$emit("backOpen",2),t.tabValues=2}):this.$notify({title:"提示",message:"落款还未填写！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"内容还未填写！",type:"warning",duration:2e3}):this.$notify({title:"提示",message:"标题还未填写！",type:"warning",duration:2e3})},aginNotices:function(t,i){var e=this;Object(n.b)(t,i).then(function(t){e.$notify({title:"成功",message:"重新发布成功！",type:"success",duration:2e3})})},openDia:function(t){alert(t)}}},a={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t._l(t.listNotice,function(i,n){return e("el-container",{key:n},[e("el-main",[e("h4",{on:{click:function(e){t.queryList(i.id)}}},[t._v(t._s(i.title))]),t._v(" "),e("p",{on:{click:function(e){t.queryList(i.id)}}},[t._v(t._s(i.content))])]),t._v(" "),e("el-aside",{attrs:{width:"150px"}},[e("el-row",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.queryList(i.id)}}},[t._v("重新编辑")]),t._v(" "),e("el-button",{on:{click:function(e){t.aginNotices(i.id,i.isPublish)}}},[t._v("再次发送")])],1)],1)],1)})],2)},staticRenderFns:[]};var o=e("C7Lr")(s,a,!1,function(t){e("VBIN")},"data-v-ad648a4a",null);i.default=o.exports},VBIN:function(t,i){},cnFZ:function(t,i,e){"use strict";i.a=function(t,i,e){return Object(n.a)({method:"post",url:"/api/admin/notice",data:{notice:{content:i,isPublish:!0,publishDept:e,title:t,type:1},roles:[]}})},i.c=function(t,i){return Object(n.a)({method:"get",url:"/api/admin/notice/list?page="+t+"&limit="+i,data:{page:t,limit:i}})},i.d=function(t){return Object(n.a)({method:"get",url:"/api/admin/notice/"+t,data:{id:t}})},i.b=function(t,i){return Object(n.a)({method:"get",url:"/api/admin/notice/"+t+"/publish?isAgain="+i,data:{id:t,isAgain:i}})},i.e=function(t,i,e,s){return Object(n.a)({method:"put",url:"/api/admin/notice/"+t,data:{notice:{id:t,content:e,isPublish:!0,publishDept:s,title:i,type:1},roles:[]}})};var n=e("vLgD")}});
//# sourceMappingURL=8.45d9758f0365e526eae0.js.map